(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b8ba95b2","chunk-94559e14"],{"0164":function(e,t,a){},3017:function(e,t,a){"use strict";a.r(t);var n={props:{value:Boolean,data:{type:Object,define:function(){return{}}},isEdit:Boolean,menuNav:{type:Array,default:function(){return[]}}},data:function(){return{type:1,form:this.$form.createForm(this),tree:[]}},watch:{data:{handler:function(e){e&&(this.type=this.data.type)},deep:!0}},methods:{handleOk:function(){},handleCancel:function(){this.$emit("input",!1)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(t.$emit("handle-submit",a,t.isEdit),t.$emit("input",!1))})}}},r=(a("6a04"),a("2877")),i=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value?a("div",[a("a-modal",{attrs:{visible:e.value},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("div",{attrs:{slot:"title"},slot:"title"},[e.isEdit?a("h3",[a("a-icon",{attrs:{type:"form"}}),e._v("编辑\n      ")],1):a("h3",[a("a-icon",{attrs:{type:"plus-square"}}),e._v("新增\n      ")],1)]),a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"类型",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-radio-group",{attrs:{disabled:e.isEdit,name:"radioGroup"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("a-radio",{attrs:{value:0}},[e._v("目录")]),a("a-radio",{attrs:{value:1}},[e._v("菜单")]),a("a-radio",{attrs:{value:2}},[e._v("按钮")])],1)],1),0==e.type?a("a-form-item",{attrs:{label:"目录名称",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.name}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.name}\n      ]"}],attrs:{placeholder:"目录名称"}})],1):1==e.type?[a("a-form-item",{attrs:{label:"菜单名称",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.name}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.name}\n      ]"}],attrs:{placeholder:"菜单名称"}})],1),a("a-form-item",{attrs:{label:"菜单url",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.url}],expression:"[\n        'url',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.url}\n      ]"}],attrs:{placeholder:"菜单url"}})],1)]:2==e.type?a("a-form-item",{attrs:{label:"按钮名称",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.name}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.name}\n      ]"}],attrs:{placeholder:"按钮名称"}})],1):e._e(),0==e.type||1==e.type?a("a-form-item",{attrs:{label:"排序",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum",{initialValue:e.data.orderNum}],expression:"[\n        'orderNum',\n        {initialValue: data.orderNum}\n      ]"}],attrs:{placeholder:"排序"}})],1):e._e(),1==e.type?a("a-form-item",{attrs:{label:"上级目录",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.parentId}],expression:"[\n        'parentId',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.parentId}\n      ]"}],attrs:{placeholder:"上级目录"}},e._l(e.menuNav,function(t){return a("a-select-option",{key:t.menuId,attrs:{value:t.menuId}},[e._v(e._s(t.name))])}),1)],1):e._e(),2==e.type?a("a-form-item",{attrs:{label:"上级菜单",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.parentId}],expression:"[\n        'parentId',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.parentId}\n      ]"}],attrs:{placeholder:"上级菜单"}},e._l(e.menuNav,function(t){return a("a-select-opt-group",{key:t.menuId},[a("span",{attrs:{slot:"label"},slot:"label"},[a("a-icon",{attrs:{type:"user"}}),e._v("\n              "+e._s(t.name)+"\n            ")],1),e._l(t.list,function(t){return a("a-select-option",{key:t.menuId,attrs:{value:t.menuId}},[e._v(e._s(t.name))])})],2)}),1)],1):e._e(),1==e.type||2==e.type?a("a-form-item",{attrs:{label:"授权标识",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{rules:[{required:!0,message:"必填！"}],initialValue:e.data.perms}],expression:"[\n        'perms',\n        {rules: [{ required: true, message: '必填！' }],initialValue: data.perms}\n      ]"}],attrs:{placeholder:"英文逗号分隔，如 sys:user:info,sys:user:update"}})],1):e._e(),0==e.type?a("a-form-item",{attrs:{label:"目录图标",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:e.data.icon}],expression:"[\n        'icon',\n        {initialValue: data.icon}\n      ]"}],attrs:{placeholder:"目录图标"}})],1):e._e(),1==e.type?a("a-form-item",{attrs:{label:"菜单图标",labelCol:{span:5},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:e.data.icon}],expression:"[\n        'icon',\n        {initialValue: data.icon}\n      ]"}],attrs:{placeholder:"菜单图标"}})],1):e._e()],2)],1)],1):e._e()},[],!1,null,null,null);i.options.__file="add-or-update.vue",t.default=i.exports},"55fe":function(e,t,a){},"6a04":function(e,t,a){"use strict";var n=a("55fe");a.n(n).a},d3b5:function(e,t,a){"use strict";var n=a("0164");a.n(n).a},ed5d:function(e,t,a){"use strict";a.r(t),a("7f7f");var n,r,i,s,l,o=a("be94"),u=(a("96cf"),a("1da1")),d=a("ed08"),c={components:{addOrUpdate:a("3017").default},data:function(){return{data:[],isEdit:!1,menuInfo:{},visible:!1,selectKey:[],menuNav:[],query:{page:1,limit:0}}},watch:{query:{handler:function(){this.getData()},deep:!0}},created:function(){this.getData()},methods:{getData:(l=Object(u.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$api.MENU_LIST(this.query);case 3:t=e.sent,this.loading=!1,t&&(this.data=Object(d.treeDataTranslate)(t,"menuId"));case 7:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),getMenuNav:(s=Object(u.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.MENU_NAV();case 2:0===(t=e.sent).code&&(this.menuNav=t.menuList);case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),save:(i=Object(u.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.MENU_SAVE(t);case 2:0===e.sent.code&&(alert("成功"),this.getData());case 4:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),update:(r=Object(u.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.MENU_UPDATE(t);case 2:0===e.sent.code&&(alert("更新成功"),this.getData());case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),getMenuInfo:function(){var e=this;return new Promise(function(){var t=Object(u.a)(regeneratorRuntime.mark(function t(a,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.MENU_INFO({menuId:e.selectKey[0]});case 2:0===(r=t.sent).code&&(e.menuInfo=r.menu,a(e.menuInfo));case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}())},handleSubmit:function(e,t){t&&this.update(Object(o.a)({},this.menuInfo,e))},handleCreate:function(e){this.save(e)},handleUpdate:function(e){this.update(e)},onSelect:function(e){this.selectKey=e},onExpand:function(){},add:function(){this.visible=!0,this.isEdit=!1,this.menuInfo={type:1},this.getMenuNav()},edit:function(e,t,a){this.visible=!0,this.isEdit=!0,this.getMenuInfo(),this.getMenuNav()},del:(n=Object(u.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$createElement,this.getMenuInfo().then(function(){var e="目录";0===a.menuInfo.type?e="目录":1===a.menuInfo.type?e="菜单":2===a.menuInfo.type&&(e="按钮");var n=a.menuInfo.name;a.$confirm({title:t("h3",["您确定删除"," ",t("a",[n," ",e])," ","吗 ?"]),content:"删除后将不可恢复，请谨慎操作！",onOk:function(){},onCancel:function(){}})});case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}},p=(a("d3b5"),a("2877")),m=Object(p.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-button-group",[a("a-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),a("a-button",{attrs:{type:"primary",disabled:1!=e.selectKey.length},on:{click:e.edit}},[e._v("编辑")]),a("a-button",{attrs:{type:"danger",disabled:1!=e.selectKey.length},on:{click:e.del}},[e._v("删除")])],1),a("a-directory-tree",{attrs:{defaultExpandAll:""},on:{select:e.onSelect,expand:e.onExpand}},e._l(e.data,function(t){return a("a-tree-node",{key:t.menuId},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._l(t.children,function(t){return a("a-tree-node",{key:t.menuId},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._l(t.children,function(t){return a("a-tree-node",{key:t.menuId,attrs:{isLeaf:""}},[a("template",{slot:"title"},[e._v(e._s(t.name))])],2)})],2)})],2)}),1),a("add-or-update",{attrs:{data:e.menuInfo,isEdit:e.isEdit,menuNav:e.menuNav},on:{"handle-submit":e.handleSubmit},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1)],1)},[],!1,null,"1e85aa52",null);m.options.__file="menu-list.vue",t.default=m.exports}}]);